<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="fragments/layout :: head('My Profile')">
    <title>My Profile - Event Management System</title>
</head>

<body>
    <nav th:replace="fragments/layout :: navbar"></nav>

    <div class="container my-5">
        <div class="row">
            <!-- Profile Info -->
            <div class="col-lg-8">
                <div class="card shadow mb-4">
                    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                        <h3 class="mb-0">My Profile</h3>
                        <a th:href="@{/users/profile/edit}" class="btn btn-light">
                            <i class="bi bi-pencil-square me-2"></i>Edit Profile
                        </a>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- Profile Picture Placeholder -->
                            <div class="col-md-4 text-center mb-4 mb-md-0">
                                <div class="bg-secondary rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3"
                                     style="width: 150px; height: 150px;">
                                    <i class="bi bi-person-circle text-white" style="font-size: 5rem;"></i>
                                </div>
                                <h4 th:text="${user.username}" class="mb-1">Username</h4>
                                <span th:if="${user.admin}" class="badge bg-danger">Admin</span>
                                <span th:unless="${user.admin}" class="badge bg-info">User</span>
                            </div>
                            
                            <!-- Profile Details -->
                            <div class="col-md-8">
                                <h4>Personal Information</h4>
                                <dl class="row">
                                    <dt class="col-sm-4">Full Name</dt>
                                    <dd class="col-sm-8" th:text="${user.firstName + ' ' + user.lastName}">John Doe</dd>
                                    
                                    <dt class="col-sm-4">Email</dt>
                                    <dd class="col-sm-8" th:text="${user.email}">john.doe@example.com</dd>
                                    
                                    <dt class="col-sm-4">Phone</dt>
                                    <dd class="col-sm-8" th:text="${user.phone != null ? user.phone : 'Not provided'}">+1234567890</dd>
                                </dl>
                                
                                <hr class="my-4">
                                
                                <div class="d-grid gap-2">
                                    <a href="/events/my-events" class="btn btn-outline-primary">
                                        <i class="bi bi-calendar-check me-2"></i>My Events
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Notifications -->
            <div class="col-lg-4">
                <div class="card shadow">
                    <div class="card-header bg-info text-white">
                        <h4 class="mb-0"><i class="bi bi-bell me-2"></i>Recent Notifications</h4>
                    </div>
                    <div class="card-body p-0">
                        <div th:if="${notifications != null && !notifications.empty}">
                            <ul class="list-group list-group-flush">
                                <li th:each="notification : ${notifications}" class="list-group-item border-0 py-3">
                                    <div class="d-flex">
                                        <div class="flex-shrink-0 me-3">
                                            <i class="bi bi-info-circle text-primary fs-4"></i>
                                        </div>
                                        <div class="flex-grow-1">
                                            <p class="mb-1" th:text="${notification}">Notification message</p>
                                            <small class="text-muted">Just now</small>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div th:if="${notifications == null || notifications.empty}" class="text-center py-5">
                            <i class="bi bi-bell-slash text-muted" style="font-size: 3rem;"></i>
                            <p class="mt-3 mb-0 px-4">You don't have any notifications at the moment.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer th:replace="fragments/layout :: footer"></footer>
    
    <th:block th:replace="fragments/layout :: scripts"></th:block>
</body>
</html> 